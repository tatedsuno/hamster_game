<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hamster Adventure Final Fixed</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="canvasContainer">
<div id="loading">Loading...</div>

<div class="ui-layer" id="gameUI">
    <div id="score" class="ui-text">Distance: 0m</div>
    <div id="seedCount" class="ui-text">Seeds: 0 / 100</div>
    <div id="flickHint" class="ui-text">← フリックで帰巣</div>
</div>

<canvas id="gameCanvas"></canvas>

<div id="instruction" style="display:none;">タップしてスタート</div>

<div id="pauseModal" class="modal">
    <h3>🏠 帰りますか？</h3>
    <p>今の仲間と種を持って<br>巣に帰ります。</p>
    <button class="btn" style="background:#ff9f43; color:#fff;" onclick="confirmGoHome()">はい (帰る)</button>
    <button class="btn" onclick="cancelGoHome()">いいえ (戻る)</button>
</div>

<div id="breedingModal" class="modal">
    <h3>💖 家族を増やしますか？</h3>
        <div id="breedingConditions" style="text-align:left; display:inline-block; line-height:1.8;"></div>
    <br><br>
        <button id="breedConfirmBtn" class="btn" style="background:#fd79a8; color:#fff;" onclick="confirmBreeding()">はい (繁殖する)</button>
    <button class="btn" onclick="cancelBreeding()">いいえ (やめる)</button>
</div>

<div id="gameOverModal" class="modal">
    <div id="overlayText"></div>
    <br>
    <button class="btn" onclick="resetGame(selectedFriendsCount)">リトライ</button>
    <br><br>
    <button class="btn" onclick="initNest()">巣に戻る</button>
</div>

<div id="logModal" class="modal">
    <h3>📝 冒険日誌</h3>
    <div id="logContent" style="text-align: left; margin: 10px 0; font-size: 14px;"></div>
    <button class="btn" onclick="closeLog()">閉じる</button>
    </div>

    <div id="breedingInfoModal" class="modal">
        <h3>🐹 繁殖・成長の状況</h3>
        <div id="breedingInfoContent" style="text-align:left; margin:10px 0; font-size:14px; line-height:1.8;"></div>
        <button class="btn" onclick="closeBreedingInfo()">閉じる</button>
    </div>

    <div id="pageIndicator">
        <div class="page-dot active" id="dotNest"></div>
        <div class="page-dot" id="dotFarm"></div>
    </div>
</div>

<div id="nestUI">
    <div id="nestStats">
        <div>🌻 貯蔵種: <b id="bankSeeds" style="color:#e67e22; font-size:20px;">0</b> 個</div>
        <div>🐹 大人: <b id="bankFriends">0</b> 匹 / <span id="breedingInfoBtn" onclick="showBreedingInfo()" style="cursor:pointer; text-decoration:underline dotted; text-underline-offset:3px;">👶 <b id="babyCount">0</b> 匹 / 🤰 <b id="pregnantCount">0</b> 匹</span></div>
    </div>
    <hr>
    <div class="slider-container">
        <label>連れて行く: <b id="takeCount">0</b> 匹</label>
        <input type="range" id="friendSlider" min="0" max="0" value="0" oninput="updateSlider()">
    </div>
    <div class="action-area">
        <button class="btn" style="background:#fd79a8; color:#fff;" onclick="startBreedingCheck()">💖 繁殖</button>
        <button class="btn" style="background:#00cec9; color:#fff;" onclick="departFromNest()">冒険へ！</button>
    </div>
</div>

<div id="farmUI">
    <div id="farmStats">
        <div>🌻 貯蔵種: <b id="farmBankSeeds" style="color:#e67e22; font-size:20px;">0</b> 個</div>
        <div>🐹 畑ワーカー: <b id="farmWorkerCount">0</b> / <span id="farmWorkerMax">0</span> 匹</div>
    </div>
    <hr>
    <div class="slider-container">
        <label>ワーカー割り当て: <b id="workerTakeCount">0</b> 匹</label>
        <input type="range" id="workerSlider" min="0" max="0" value="0" oninput="updateWorkerSlider()">
    </div>
    <div class="action-area">
        <button class="btn" style="background:#f39c12; color:#fff;" onclick="harvestAll()">🌻 一括収穫</button>
        <button id="expandBtn" class="btn" style="background:#27ae60; color:#fff;" onclick="expandFarm()">🔨 拡張</button>
    </div>
</div>

<script src="js/config.js"></script>
<script src="js/main.js"></script>
<script src="js/data.js"></script>
<script src="js/nest.js"></script>
<script src="js/farm.js"></script>
<script src="js/game.js"></script>
<script src="js/input.js"></script>

</body>
</html>
